<%- include("partials/header", {isAuthenticated}) -%>
<div class="container content-body-font">
    <div class="col-12">
        <h1 class="heading-centre heading-bold normal-heading-font"><%= category %> </h1>
    </div>
    <div class="row my-3">
        <%# Check if there are posts for requested categories... %> 
        <%if (posts.length) { %>
            <%# If there are posts(length>=1) then display them through looping %> 
            <% posts.forEach(function (post) { %>
                <div class="post-preview col-md-5 mx-2 mx-md-auto py-3 my-3">
                    <h1> <%= post.blogTitle %> </h1>
                    <p class="post-date-font">Posted on <%= new Date(post.timestamps).toDateString() %>, <%= new Date(post.timestamps).toLocaleTimeString() %> </p>
                    <a href="/author/<%= post.author._id %> " class="p-2 mb-4">
                        <i class="fas fa-user"></i>
                        <%= post.author.userName %> 
                    </a><br>
                    <% if (post.category) { %>
                        <div class="badge badge-pill badge-danger py-1 px-2">
                            <%= post.category %> 
                        </div>
                        <% } %>
                        <hr/>
                        <%- post.blogContent.substring(0,15000000) + ("...") %>
                        <a href="posts/<%= post._id %>"><button class="button read">Read More</button></a>
                    </div>
            <%# If there are no posts(length=0) then display no blogs found %> 
            <% });} else { %>
                <p class="mx-auto text-danger">No Blogs Found...</p> 
        <%}%>
    </div>
</div>
<%- include("partials/footer") -%>